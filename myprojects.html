<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project calculator</title>
    <link rel="icon" href="images/Group 163.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="myprojectsstyle.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>

<body onload="fetchcurrentuserprojects()">
    <div class="header">
        <div class="logo-area" id="logo-area" style="cursor: pointer;">
          <img src="images/LOGO with text (4) 1.png" alt="logo" class="logo" />
          <div>
            <span class="tagline"> Project Profitability Estimator</span>
          </div>
        </div>
        <div class="actions">
          <div class="tokens-remian" id="tokens-remian" style="display: none;">
            <span class="coins-icon"><img src="./images/Vector.png" height="22px" width="22px" alt=""></span>
            <span class="token-count" id="token-count"></span>
          </div>
          <div class="toggle-theme" style="display: none;">
            <span class="sun-dt"><i class='bx bxs-sun'></i></span>
            <span class="moon-dt"><i class='bx bx-moon'></i></span>
          </div>
          <button class="signup-btn" id="signup-btn">Log in</button>
          <!-- <button class="signup-btn" id="signup-btn">Log In</button> -->
          <div id="dropdownList" class="dropdown-content" style="display: none;">
            <a onclick="retomyhome()">New Estimator</a>
            <a onclick="retomymembers()">My Members</a>
            <a onclick="curruserlogout()">Sign Out</a>
          </div>
        </div>
    </div>
    <div class="header-btm"></div>

    <!-- five cards -->
    <div class="fivecard-title">
        <h1>ESTIMATES OVERVIEW</h1>
    </div>
    <div class="dashboard-cards" id="dashboard-cards" style="display: none;">
        <div class="card">
          <div class="card-value" id="total-projects"></div>
          <div class="card-title">Total Projects Estimated</div>
        </div>
        <div class="card">
          <div class="card-value" id="average-duration"></div>
          <div class="card-title">Average Project Duration (days)</div>
        </div>
        <div class="card">
          <div class="card-value" id="average-revenue"></div>
          <div class="card-title">Average Quoted Amount</div>
        </div>
        <div class="card">
          <div class="card-value" id="total-forecast"></div>
          <div class="card-title">Total Revenue Forecast</div>
        </div>
        <div class="card">
          <div class="card-value" id="total-hours"></div>
          <div class="card-title">Total Estimated Hours</div>
        </div>
    </div>

    <!-- display saved projects -->
     <div class="projects_info" id="projects_info">
        <div id="projectstable" class="projectstable">
            <div class="subtitle_container">
                <div class="subtitle_name">
                    Saved Estimates
                </div>
            </div>
            <div class="project_table_div">
                <table>
                    <thead style="border-radius:12px;">
                      <tr>
                        <th>Project Name</th>
                        <th>Start Date</th>
                        <th>Predicted End Date</th>
                        <th>Amount Quoted</th>
                        <th>Duration</th>
                      </tr>
                    </thead>
                    <tbody id="projectlistbody">
                        <tr>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                          </tr>
                          <tr>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                          </tr>
                          <tr>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                            <td><div class="skeleton"></div></td>
                          </tr>
                    </tbody>
                </table>
            </div>
         </div>
         <div id="redirectionbutton">
            <div class="newestimate-btn">
                <button type="button" class="redirect-home" id="redirect-home"><i class='bx bx-plus' style='color:#fff; font-size:20px; margin-right: 5px;'></i>New Estimate</button>
            </div>
         </div>
     </div>

     
     <div id="projectDetailsContainer" class="project-details-container" style="display: none;">
        <div class="details-header">
            <button id="backToProjects" class="back-button"><i class='bx bx-chevron-left' ></i></button>
            <h3>All Estimates</h3>
        </div>
        <div id="projectDetailsContent">
            <div class="output_container">

                <!-- Project Title and description card -->
                <div class="titleNdescription">
                    <div class="outer_subtitle_container Etitle">
                        <div class="outer_subtitle_name">Estimate Name:</div>
                    </div>
                    <div class="inner_subtitle_container Edescp">
                        <div class="inner_subtitle_name">Description:</div>
                    </div>
                </div>
                <!-- Project Timeline Projection -->
                <div class="projecttimeline_projections">
                   <!-- sub title -->
                   <div class="subtitle_container">
                       <div class="subtitle_name">
                           Project Timeline Projection 
                       </div>
                   </div>
       
                   <!-- team daily capacity -->
                   <div class="row_container">
                       <!-- Team Daily Capacity -->
                        <div class="Team_Daily_Capacity">
                           <div class="inner_subtitle_container">
                               <div class="inner_subtitle_name inner_subtitle_name1">
                                   Team Daily Capacity 
                               </div>
                           </div>
                           <div class="outer_subtitle_container">
                               <div class="outer_subtitle_name">
                                   8.0 hours/day 
                               </div>
                           </div>
                        </div>
       
                        <!-- Projected Duration -->
                        <div class="Projected_Duration">
                           <div class="inner_subtitle_container">
                               <div class="inner_subtitle_name inner_subtitle_name2">
                                   Projected Duration
                               </div>
                           </div>
                           <div class="outer_subtitle_container">
                               <div class="outer_subtitle_name">
                                   20 days
                               </div>
                           </div>
                        </div>
       
                        <!-- Projected Start Date -->
                        <div class="Projected_StartDate">
                            <div class="inner_subtitle_container">
                                <div class="inner_subtitle_name inner_subtitle_name4">
                                    Project Start Date
                                </div>
                            </div>
                            <div class="outer_subtitle_container">
                                <div class="outer_subtitle_name expecteddate">
                                    2025-04-13
                                </div>
                            </div>
                        </div>
                        
                        <!-- Projected End Date -->
                        <div class="Projected_EndDate">
                           <div class="inner_subtitle_container">
                               <div class="inner_subtitle_name inner_subtitle_name3">
                                   Projected End Date
                               </div>
                           </div>
                           <div class="outer_subtitle_container">
                               <div class="outer_subtitle_name expecteddate">
                                   2025-04-13
                               </div>
                           </div>
                        </div>
                   </div>
                </div>
       
                <!-- Financial Analysis -->
                <div class="Financial_Analysis">
                   <!-- sub title -->
                   <div class="subtitle_container">
                       <div class="subtitle_name">
                           Financial Analysis
                       </div>
                   </div>
       
                   <!-- team daily capacity -->
                   <div class="row_container">
                       <!-- Revenue -->
                       <div class="Revenue">
                       <div class="inner_subtitle_container">
                           <div class="inner_subtitle_name2">
                            Amount to be Quoted
                           </div>
                       </div>
                       <div class="outer_subtitle_container">
                           <div class="outer_subtitle_name">
                               $9,600.00
                           </div>
                       </div>
                       </div>
                       
                       <!-- Profit/Loss -->
                        <div class="Profit_Loss">
                           <div class="inner_subtitle_container">
                               <div class="inner_subtitle_names">
                                   Profit Amount
                               </div>
                           </div>
                           <div class="outer_subtitle_container">
                               <div class="outer_subtitle_name">
                                   $2,400.00
                               </div>
                           </div>
                        </div>
       
                        <!-- Profit Margin -->
                        <div class="Profit_Margin">
                           <div class="inner_subtitle_container">
                               <div class="inner_subtitle_name3">
                                   Profit Margin
                               </div>
                           </div>
                           <div class="outer_subtitle_container">
                               <div class="outer_subtitle_name">
                                   25.0%
                               </div>
                           </div>
                        </div>
       
                       <!-- Team Costs -->
                       <!-- <div class="Team_Costs">
                       <div class="inner_subtitle_container">
                           <div class="inner_subtitle_name1">
                               Team Costs
                           </div>
                       </div>
                       <div class="outer_subtitle_container">
                           <div class="outer_subtitle_name">
                               $7,200.00
                           </div>
                       </div>
                       </div>       -->
                   </div>
                </div>
            <!-- charts section -->
            <div class="allcharts" id="allcharts">
                <div class="subtitle_container">
                    <div class="subtitle_name">
                        Visualizations
                    </div>
                </div>
                <div class="divsec">
                    <div class="card1">
                        <div class="subtitle_container">
                            <div class="sidesubtitle_name">
                                Profitability Analysis
                            </div>
                        </div>
                        <div class="chart1">
                            <canvas id="profitChart"></canvas>
                        </div>
                    </div>
                    <div class="card2">
                        <div class="subtitle_container">
                            <div class="sidesubtitle_name">
                                Charges Allocation
                            </div>
                            <!-- <div class="sidesubtitle_name">
                                subtitle
                            </div> -->
                        </div>
                        <div class="chart2">
                            <canvas id="billChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
                <!-- Project Dashboard -->
                <div class="project_dashhboard">
                   <!-- <div class="maintitle">
                       Project Dashboard
                   </div> -->
                   <div class="subtitle_container">
                       <div class="subtitle_name">
                           Project Metrics Summary
                       </div>
                   </div>
                   <div class="metrics-card">
                       <div class="metric-item">
                           <span class="metric-label">Total Hours</span>
                           <span class="brds"></span>
                           <span class="metric-value">160.0</span>
                       </div>
                       <div class="metric-item">
                           <span class="metric-label">Calculated Cost</span>
                           <span class="brds"></span>
                           <span class="metric-value">$ 7,200.00</span>
                       </div>
                       <div class="metric-item">
                           <span class="metric-label">Calculated Revenue</span>
                           <span class="brds"></span>
                           <span class="metric-value">$ 9,600.00</span>
                       </div>
                       <div class="metric-item">
                        <span class="metric-label">Amount to be Quoted</span>
                        <span class="brds"></span>
                        <span class="metric-value">$ 5,333.00</span>
                      </div>
                       <div class="metric-item">
                           <span class="metric-label">Profit ($)</span>
                           <span class="brds"></span>
                           <span class="metric-value">$ 2,400.00</span>
                       </div>
                       <div class="metric-item">
                           <span class="metric-label">Profit Margin</span>
                           <span class="brds"></span>
                           <span class="metric-value">25.0 %</span>
                       </div>
                       <div class="metric-item">
                           <span class="metric-label">Avg Billable Ratio</span>
                           <span class="brds"></span>
                           <span class="metric-value">100.00 % (all)</span>
                       </div>
                       <div class="metric-item">
                           <span class="metric-label">Duration</span>
                           <span class="brds"></span>
                           <span class="metric-value">16.0 working days</span>
                       </div>
                       <div class="metric-item">
                           <span class="metric-label">End Date</span>
                           <span class="brds"></span>
                           <span class="metric-value">April 13, 2025</span>
                       </div>
                   </div>
               </div>
       
               
                <!-- Team Costs breakdown -->
                <div class="teamcost_breakdown">
                   <!-- sub title -->
                   <div class="subtitle_container">
                       <div class="subtitle_name">
                           Team Cost Breakdown
                       </div>
                   </div>
                   
                   <div class="teamcost_breakdown_table">
                       <table class="breakdown-table">
                           <thead>
                               <tr>
                                   <th>Name</th>
                                   <th>Role</th>
                                   <th>Cost / Hour</th>
                                   <th>Hours</th>
                                   <th>Total Cost</th>
                               </tr>
                           </thead>
                           <tbody>
                               <tr>
                                   <td>name</td>
                                   <td>role</td>
                                   <td>cost</td>
                                   <td>hour</td>
                                   <td>total</td>
                               </tr>
                           </tbody>
                           <tfoot>
                               <tr class="tot-view">
                                   <td>TOTAL</td>
                                   <td></td>
                                   <td></td>
                                   <td></td>
                                   <td>value</td>
                               </tr>
                           </tfoot>
                       </table>            
                   </div>
                   <!-- sub formulas notes -->
                   <div class="subcalcnotes">
                       <div class="subnotes">
                           Total cost = Σ (Cost Rate per hour × Total Hours) per team member
                       </div>
                   </div>
                </div>
       
                <!-- Revenue breakdown -->
                 <div class="revenue_breakdown">
                   <!-- sub title -->
                   <div class="subtitle_container">
                       <div class="subtitle_name">
                           Revenue Breakdown
                       </div>
                   </div>
                   <div class="revenue_breakdown_table">
                       <table class="breakdown-table">
                           <thead>
                               <tr>
                                   <th>Name</th>
                                   <th>Role</th>
                                   <th>Billable Rate ($/hr)</th>
                                   <th>Billable ratio %</th>
                                   <th>Billable Hours</th>
                                   <th>Revenue</th>
                               </tr>
                           </thead>
                           <tbody>
                               <tr>
                                   <td>name</td>
                                   <td>role</td>
                                   <td>rate</td>
                                   <td>ratio</td>
                                   <td>hours</td>
                                   <td>total</td>
                               </tr>
                           </tbody>
                           <tfoot>
                               <tr class="tot-view">
                                   <td>TOTAL</td>
                                   <td></td>
                                   <td></td>
                                   <td></td>
                                   <td></td>
                                   <td>value</td>
                               </tr>
                           </tfoot>
                       </table>            
                   </div>
                   <!-- sub formulas notes -->
                   <div class="subcalcnotes">
                       <div class="subnotes">
                           Total Revenue = Σ (Billable Rate × Billable Hours) per team member<br>Billable Hours = Total Hours × (Billable Ratio / 100)
                       </div>
                   </div>
                 </div>
           </div>

        </div>
    </div>

     <script src="myprojects.js"></script>

</body>
</html>